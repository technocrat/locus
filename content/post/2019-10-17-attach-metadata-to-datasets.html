---
title: "Metadata for datasets"
author: Richard Careaga
date: "2019-10-18"
slug:  Metadata for datasets
categories:
  - Data Science
tags:
  - R
  - documentation
---



<div id="where-does-this-dataset-come-from" class="section level1">
<h1>Where does this dataset come from?</h1>
<blockquote>
<p>Is this the original revised data or the revised revised data?</p>
</blockquote>
<p>Keeping track of the provenance of data can be a challenge, especially when drawing on published sources. Keeping a record of the origin, the date accessed, the transformations applied (e.g., converting from .xls to cvs and converting character strings such as “$1,250,321.21” to floats or date strings to date objects), subsequent changes, who handled the data object and where it can be found in a repository are all things that enhance the analyst’s own ability to reproduce results.</p>
<p>Unfortunately, notes go missing, files get mis-filed and all the other hazards that can befall research can happen. Often, one wishes for R objects with built-in metadata for that purpose.</p>
</div>
<div id="using-mostattributes-to-do-attach-metadata" class="section level1">
<h1>Using mostattributes() to do attach metadata</h1>
<p>Scott Chamerlain at ropensci.org brought <strong>attr</strong> to my attention, which is the built-in way I was looking for originally. He also pointed me to EML, a much more elaborate approach suited for publication projects.</p>
<div id="a-minimal-example" class="section level2">
<h2>A minimal example</h2>
<div id="create-data-frame-and-a-separate-metadata-list" class="section level3">
<h3>Create data frame and a separate metadata list</h3>
<pre><code>## Loading required package: jsonlite</code></pre>
<pre><code>fips &lt;- read.csv(&quot;https://tuva.s3-us-west-2.amazonaws.com/state_fips_postal.csv&quot;, header = FALSE)
colnames(fips) = c(&quot;state&quot;, &quot;fip&quot;, &#39;id&#39;)
require(jsonlite) # easier to use JSON to write metadata
meta &lt;- fromJSON(&quot;https://tuva.s3-us-west-2.amazonaws.com/2015-07-31-meta.json&quot;)</code></pre>
<p>The json source file looks like this</p>
<pre><code>[
    {
    &quot;Accessed&quot;: &quot;2015-07-31&quot;,
    &quot;GitBlame&quot;: &quot;Richard Careaga&quot;,
    &quot;Contact&quot;: &quot;technocrat@twitter&quot;,
    &quot;Preprocessing&quot;: &quot;FIPS Codes for the States and District of Columbia table captured manually and converted to cvs file&quot;,
    &quot;Source&quot;: &quot;https://www.census.gov/geo/reference/ansi_statetables.html&quot;,
    &quot;Repository&quot;: &quot;unassigned&quot;,
    &quot;Version&quot;: &quot;1.0&quot;
    }
]</code></pre>
</div>
<div id="associate-the-metadata-with-the-data-frame-using-mostattributes" class="section level3">
<h3>Associate the metadata with the data frame using mostattributes</h3>
<pre><code>x &lt;- fips
mostattributes(x) &lt;- list(meta = meta)</code></pre>
</div>
<div id="now-metadata-is-displayed-by-default" class="section level3">
<h3>Now metadata is displayed by default</h3>
<pre class="r"><code>x</code></pre>
<pre><code>## [[1]]
##  [1] Alabama              Alaska               Arizona             
##  [4] Arkansas             California           Colorado            
##  [7] Connecticut          Delaware             District of Columbia
## [10] Florida              Georgia              Hawaii              
## [13] Idaho                Illinois             Indiana             
## [16] Iowa                 Kansas               Kentucky            
## [19] Louisiana            Maine                Maryland            
## [22] Massachusetts        Michigan             Minnesota           
## [25] Mississippi          Missouri             Montana             
## [28] Nebraska             Nevada               New Hampshire       
## [31] New Jersey           New Mexico           New York            
## [34] North Carolina       North Dakota         Ohio                
## [37] Oklahoma             Oregon               Pennsylvania        
## [40] Rhode Island         South Carolina       South Dakota        
## [43] Tennessee            Texas                Utah                
## [46] Vermont              Virginia             Washington          
## [49] West Virginia        Wisconsin            Wyoming             
## 51 Levels: Alabama Alaska Arizona Arkansas California ... Wyoming
## 
## [[2]]
##  [1]  1  2  4  5  6  8  9 10 11 12 13 15 16 17 18 19 20 21 22 23 24 25 26
## [24] 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 44 45 46 47 48 49 50
## [47] 51 53 54 55 56
## 
## [[3]]
##  [1] AL AK AZ AR CA CO CT DE DC FL GA HI ID IL IN IA KS KY LA ME MD MA MI
## [24] MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI SC SD TN TX UT VT
## [47] VA WA WV WI WY
## 51 Levels: AK AL AR AZ CA CO CT DC DE FL GA HI IA ID IL IN KS KY LA ... WY
## 
## attr(,&quot;meta&quot;)
##     Accessed        GitBlame            Contact
## 1 2015-07-31 Richard Careaga technocrat@twitter
##                                                                                          Preprocessing
## 1 FIPS Codes for the States and District of Columbia table captured manually and converted to cvs file
##                                                       Source Repository
## 1 https://www.census.gov/geo/reference/ansi_statetables.html unassigned
##   Version
## 1     1.0</code></pre>
</div>
</div>
</div>
