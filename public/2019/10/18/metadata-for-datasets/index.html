<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.55.5" />


<title>Metadata for datasets - Locus: Richard Careaga</title>
<meta property="og:title" content="Metadata for datasets - Locus: Richard Careaga">


  <link href='/favicon.ico' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="https://github.com/technocrat">GitHub</a></li>
    
    <li><a href="https://linkedin.com/in/richardcareaga">LinkedIn</a></li>
    
    <li><a href="https://twitter.com/technocrat">Twitter</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">3 min read</span>
    

    <h1 class="article-title">Metadata for datasets</h1>

    
    <span class="article-date">2019-10-18</span>
    

    <div class="article-content">
      

<h1 id="where-does-this-dataset-come-from">Where does this dataset come from?</h1>

<blockquote>
<p>Is this the original revised data or the revised revised data?</p>
</blockquote>

<p>Keeping track of the provenance of data can be a challenge, especially when drawing on published sources. Keeping a record of the origin, the date accessed, the transformations applied (e.g., converting from .xls to cvs and converting character strings such as “$1,250,321.21” to floats or date strings to date objects), subsequent changes, who handled the data object and where it can be found in a repository are all things that enhance the analyst’s own ability to reproduce results.</p>

<p>Unfortunately, notes go missing, files get mis-filed and all the other hazards that can befall research can happen. Often, one wishes for R objects with built-in metadata for that purpose.</p>

<h1 id="using-mostattributes-to-do-attach-metadata">Using mostattributes() to do attach metadata</h1>

<p>Scott Chamerlain at ropensci.org brought *<em>attr</em> to my attention, which is the built-in way I was looking for originally. He also pointed me to EML, a much more elaborate approach suited for publication projects.</p>

<h2 id="a-minimal-example">A minimal example</h2>

<h3 id="create-data-frame-and-a-separate-metadata-list">Create data frame and a separate metadata list</h3>

<pre><code>## Loading required package: jsonlite
</code></pre>

<pre><code>fips &lt;- read.csv(&quot;https://tuva.s3-us-west-2.amazonaws.com/state_fips_postal.csv&quot;, header = FALSE)
colnames(fips) = c(&quot;state&quot;, &quot;fip&quot;, 'id')
r
require(jsonlite) # easier to use JSON to write metadata
meta &lt;- fromJSON(&quot;https://tuva.s3-us-west-2.amazonaws.com/2015-07-31-meta.json&quot;)
</code></pre>

<hr />

<p>Accessed       GitBlame            Contact</p>

<hr />

<h2 id="2015-07-31-richard-careaga-technocrat-twitter">2015-07-31   Richard Careaga   technocrat@twitter</h2>

<p>Table: Table continues below</p>

<hr />

<pre><code>     Preprocessing         
</code></pre>

<hr />

<p>FIPS Codes for the States and
  District of Columbia table<br />
     captured manually and</p>

<h2 id="converted-to-cvs-file">converted to cvs file</h2>

<p>Table: Table continues below</p>

<hr />

<pre><code>                       Source                             Repository 
</code></pre>

<hr />

<h2 id="https-www-census-gov-geo-reference-ansi-statetables-html-unassigned"><a href="https://www.census.gov/geo/reference/ansi_statetables.html">https://www.census.gov/geo/reference/ansi_statetables.html</a>   unassigned</h2>

<p>Table: Table continues below</p>

<hr />

<h2 id="version">Version</h2>

<h2 id="1-0">1.0</h2>

<h3 id="associate-the-metadata-with-the-data-frame-using-attr">Associate the metadata with the data frame using attr</h3>

<pre><code># invisibly with attr
x &lt;- fips
attr(x, &quot;meta&quot;) &lt;- meta
</code></pre>

<h3 id="by-default-metadata-is-not-displayed">By default, metadata is not displayed</h3>

<hr />

<pre><code>    state           fip   id 
</code></pre>

<hr />

<pre><code>   Alabama           1    AL 

    Alaska           2    AK 

   Arizona           4    AZ 

   Arkansas          5    AR 

  California         6    CA 

   Colorado          8    CO 

 Connecticut         9    CT 

   Delaware         10    DE 
</code></pre>

<p>District of Columbia   11    DC</p>

<pre><code>   Florida          12    FL 

   Georgia          13    GA 

    Hawaii          15    HI 

    Idaho           16    ID 

   Illinois         17    IL 

   Indiana          18    IN 

     Iowa           19    IA 

    Kansas          20    KS 

   Kentucky         21    KY 

  Louisiana         22    LA 

    Maine           23    ME 

   Maryland         24    MD 

Massachusetts       25    MA 

   Michigan         26    MI 

  Minnesota         27    MN 

 Mississippi        28    MS 

   Missouri         29    MO 

   Montana          30    MT 

   Nebraska         31    NE 

    Nevada          32    NV 

New Hampshire       33    NH 

  New Jersey        34    NJ 

  New Mexico        35    NM 

   New York         36    NY 

North Carolina      37    NC 

 North Dakota       38    ND 

     Ohio           39    OH 

   Oklahoma         40    OK 

    Oregon          41    OR 

 Pennsylvania       42    PA 

 Rhode Island       44    RI 

South Carolina      45    SC 

 South Dakota       46    SD 

  Tennessee         47    TN 

    Texas           48    TX 

     Utah           49    UT 

   Vermont          50    VT 

   Virginia         51    VA 

  Washington        53    WA 

West Virginia       54    WV 

  Wisconsin         55    WI 

   Wyoming          56    WY 
</code></pre>

<hr />

<h3 id="metadata-has-to-be-invoked-by-name">Metadata has to be invoked by name</h3>

<pre><code>attr(x, &quot;meta&quot;)
</code></pre>

<hr />

<p>Accessed       GitBlame            Contact</p>

<hr />

<h2 id="2015-07-31-richard-careaga-technocrat-twitter-1">2015-07-31   Richard Careaga   technocrat@twitter</h2>

<p>Table: Table continues below</p>

<hr />

<pre><code>     Preprocessing         
</code></pre>

<hr />

<p>FIPS Codes for the States and
  District of Columbia table<br />
     captured manually and</p>

<h2 id="converted-to-cvs-file-1">converted to cvs file</h2>

<p>Table: Table continues below</p>

<hr />

<pre><code>                       Source                             Repository 
</code></pre>

<hr />

<h2 id="https-www-census-gov-geo-reference-ansi-statetables-html-unassigned-1"><a href="https://www.census.gov/geo/reference/ansi_statetables.html">https://www.census.gov/geo/reference/ansi_statetables.html</a>   unassigned</h2>

<p>Table: Table continues below</p>

<hr />

<h2 id="version-1">Version</h2>

<h2 id="1-0-1">1.0</h2>

<h3 id="associate-the-metadata-with-the-data-frame-using-mostattributes">Associate the metadata with the data frame using mostattributes</h3>

<pre><code>x &lt;- fips
mostattributes(x) &lt;- list(meta = meta)
</code></pre>

<h3 id="the-metadata-now-displays-with-the-data-frame">The metadata now displays with the data frame</h3>

<pre><code>str(x)
</code></pre>

<p>List of 3
 $ : Factor w/ 51 levels &ldquo;Alabama&rdquo;,&ldquo;Alaska&rdquo;,..: 1 2 3 4 5 6 7 8 9 10 &hellip;
 $ : int [1:51] 1 2 4 5 6 8 9 10 11 12 &hellip;
 $ : Factor w/ 51 levels &ldquo;AK&rdquo;,&ldquo;AL&rdquo;,&ldquo;AR&rdquo;,..: 2 1 4 3 5 6 7 9 8 10 &hellip;
 - attr(*, &ldquo;meta&rdquo;)=&lsquo;data.frame&rsquo;:    1 obs. of  7 variables:
  ..$ Accessed     : chr &ldquo;2015-07-31&rdquo;
  ..$ GitBlame     : chr &ldquo;Richard Careaga&rdquo;
  ..$ Contact      : chr &ldquo;technocrat@twitter&rdquo;
  ..$ Preprocessing: chr &ldquo;FIPS Codes for the States and District of Columbia table captured manually and converted to cvs file&rdquo;
  ..$ Source       : chr &ldquo;<a href="https://www.census.gov/geo/reference/ansi_statetables.html&quot;">https://www.census.gov/geo/reference/ansi_statetables.html&quot;</a>
  ..$ Repository   : chr &ldquo;unassigned&rdquo;
  ..$ Version      : chr &ldquo;1.0&rdquo;</p>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

